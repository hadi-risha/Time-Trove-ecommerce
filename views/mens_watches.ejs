<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mens Watches</title>
    <!-- css -->
    <link rel="stylesheet" href="css/home.css">
    <link rel="stylesheet" href="css/all_watches.css">
    <!-- font-awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
        integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Bootstrap css cdn link -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <!-- end of Bootstrap css cdn link -->

</head>

<body style="overflow-x: hidden;">

    <!-- header section -->
    <header class="head-section">
        <div class="container-fluid">
            <div class="row p-0">
                <div class="col-12 m-0 head-section d-flex align-items-center p-0">
                    <!-- logo  -->
                    <a href="/">
                    <svg class="logo" width="115" height="115" viewBox="0 0 115 115" fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M31 90.44C26.7867 90.44 23.8267 89.1867 22.12 86.68C21.5333 85.88 21.24 84.84 21.24 83.56C21.24 82.12 21.6933 80.8667 22.6 79.8C23.6667 78.5733 25 77.96 26.6 77.96C27.6667 77.96 28.52 78.3333 29.16 79.08C29.7467 79.6667 30.04 80.4667 30.04 81.48C30.04 82.76 29.5867 83.8 28.68 84.6C27.7733 85.3467 26.8133 85.72 25.8 85.72C24.8933 85.72 24.0667 85.4 23.32 84.76C24.2267 86.7867 25.8533 87.8 28.2 87.8C33.6933 87.8 38.84 84.2267 43.64 77.08C44.8667 75.32 46.0667 73.48 47.24 71.56C48.4133 69.5867 49.5867 67.5333 50.76 65.4C51.8267 63.3733 52.8933 61.3467 53.96 59.32C55.0267 57.2933 56.0933 55.2667 57.16 53.24C61.5333 44.9733 66.36 40.0667 71.64 38.52C69.6133 38.2533 67.5867 37.96 65.56 37.64C63.5867 37.32 61.5867 37 59.56 36.68C57.16 36.3067 54.9467 36.04 52.92 35.88C50.9467 35.72 49.1867 35.64 47.64 35.64C41.3467 35.64 36.2533 36.9467 32.36 39.56C30.12 41.0533 28.3333 42.8667 27 45C25.6133 47.1867 24.92 49.2933 24.92 51.32C24.92 56.0133 28.0667 58.36 34.36 58.36C36.4933 58.36 38.6267 57.96 40.76 57.16C42.8933 56.3067 45.08 55.1067 47.32 53.56C49.1867 52.1733 50.92 50.6267 52.52 48.92C54.12 47.16 55.5333 45.2133 56.76 43.08C57.0267 42.6533 57.3733 42.44 57.8 42.44C58.44 42.44 58.6267 42.68 58.36 43.16C57.2933 45.6133 55.9867 47.8533 54.44 49.88C52.8933 51.8533 51.08 53.6133 49 55.16C44.7333 58.2533 40.0133 59.8 34.84 59.8C32.5467 59.8 30.4933 59.5067 28.68 58.92C26.8667 58.28 25.3467 57.32 24.12 56.04C22.0933 53.9067 21.08 51.3467 21.08 48.36C21.08 45.7467 21.88 43.2133 23.48 40.76C25.08 38.2533 27.3467 36.2533 30.28 34.76C35.08 32.4133 40.3867 31.24 46.2 31.24C48.28 31.24 50.7867 31.4267 53.72 31.8C56.6533 32.1733 60.0133 32.7333 63.8 33.48C68.8667 34.4933 73.0267 35.24 76.28 35.72C79.5333 36.2 81.88 36.44 83.32 36.44C86.4667 36.44 89 35.88 90.92 34.76C91.24 34.6 91.5067 34.52 91.72 34.52C92.04 34.52 92.2 34.7333 92.2 35.16C92.2 35.5333 91.9867 35.8533 91.56 36.12C88.04 38.52 83.5867 39.56 78.2 39.24L75.64 39C70.52 39.5867 66.28 44.0133 62.92 52.28C58.44 63.2133 55.7733 69.5067 54.92 71.16C51.3467 78.0933 47.1067 83.32 42.2 86.84C38.84 89.24 35.1067 90.44 31 90.44ZM76.2094 87C72.7427 87 71.0094 85.1067 71.0094 81.32C71.0094 80.5733 71.0627 79.8 71.1694 79C71.3294 78.2 71.5694 77.4 71.8894 76.6C74.716 69.1333 77.116 63.0533 79.0894 58.36H73.8894L74.8494 56.6H79.8094L81.7294 51C82.4227 49.0267 83.0094 47.8533 83.4894 47.48C83.8627 47.2133 84.716 47.08 86.0494 47.08L89.4894 47.16C88.4227 48.0667 87.6227 49.16 87.0894 50.44L84.4494 56.6H90.5294L89.5694 58.36H83.7294C83.356 59.2133 82.9827 60.0667 82.6094 60.92C82.2894 61.7733 81.916 62.6533 81.4894 63.56C80.3694 66.0133 79.4094 68.3333 78.6094 70.52C77.6494 73.0267 76.876 75.1867 76.2894 77C75.756 78.8133 75.436 80.2533 75.3294 81.32C75.116 83.9333 75.8094 85.24 77.4094 85.24C78.9027 85.24 80.716 83.64 82.8494 80.44L83.8094 81.56C81.2494 85.1867 78.716 87 76.2094 87Z"
                            fill="#FDFFA8" />
                        <path
                            d="M57.55 114.1C88.7817 114.1 114.1 88.7817 114.1 57.55C114.1 26.3183 88.7817 1 57.55 1C26.3183 1 1 26.3183 1 57.55C1 88.7817 26.3183 114.1 57.55 114.1Z"
                            stroke="#F1F5D9" stroke-width="1.38095" stroke-linecap="round" stroke-linejoin="round" />
                    </svg></a>
                    <!-- /logo -->
                    <!-- icons -->
                    <div class="icons">
                        <ul class="useroption p-0 m-0 d-flex align-items-center list-unstyled">
                            <li>
                                <a href="#" class="search">
                                    <span class="search-icon"><i class="fa fa-search" aria-hidden="true"></i></span>
                                </a>
                                <div class="search-box" style="display: none;">
                                    <button type="button" class="search-close"><i class="fa fa-times" aria-hidden="true"></i> Close</button>
                                    <input id="searchInput" style="color: rgb(0, 0, 0);" type="text"  autocomplete="off" class="search-input" placeholder="Search for products,brands and more">
                                    <button type="submit" class="search-submit"><i class="fa fa-arrow-right" aria-hidden="true"></i></button>
                                </div>
                            </li>

                            <!-- container to show search results -->
                            <div id="searchResults" class="search-results"></div>
                            <!-- /container to show search results -->


                            <li>
                                <div class="dropdown">
                                    <a  class="person">
                                        <span><svg class="person-icon "  xmlns="http://www.w3.org/2000/svg"  fill="currentColor" class="bi bi-person-fill" viewBox="0 0 16 16">
                                            <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6"/>
                                        </svg></span>
                                        <!-- <i class="bi bi-person-fill"></i> -->
                                    </a>

                                    <!-- Dropdown Content -->
                                    <% if(userLoggined){ %>
                                    <div class="dropdown-content" id="dropdownContent">
                                        <p  class="name-text">Hello <%= userName %></p>
                                        <div class="dropdown-line1"></div>
                                        <a href="/user-profile" style="color: black;">Profile</a>
                                        <a href="/orders" style="color: black;">Orders</a>
                                        <a href="#" style="color: black;">Wishlist</a>
                                        <a href="#" style="color: black;">Saved Addresses</a>
                                        <a href="#" style="color: black;">Edit Profile</a>
                                        <a href="/forgot-password" style="color: black;">Reset password</a>
                                        <div class="dropdown-line2"></div>
                                        <!-- user logout button -->
                                        <a href="#" style="color: black;">
                                            <form action="/user-logout" method="post">
                                                <button class="logOut-btn">Logout</button>
                                            </form>
                                        </a>
                                        <!-- end of user logout button -->
                                    </div>
                                <% }else{ %>
                                    <div class="dropdown-content" id="dropdownContent">
                                        <p class="name-text">Welcome</p>
                                        <!-- <p style="font-size: 13px;">To access account and manage orders</p> -->
                                        <a href="/user-login"><p class="login-signup">LOGIN / SIGNUP</p></a>
                                        <div class="dropdown-line1"></div>
                                        <a href="/user-login" style="color: black;">Profile</a>
                                        <a href="/user-login" style="color: black;">Orders</a>
                                        <a href="/user-login" style="color: black;">Wishlist</a>
                                        <a href="/user-login" style="color: black;">Saved Addresses</a>
                                        <a href="/user-login" style="color: black;">Edit Profile</a>
                                    </div>
                                <% } %>
                                </div>

                                <script>
                                    // Function to toggle the dropdown content
                                    function toggleDropdown() {
                                        var dropdownContent = document.getElementById("dropdownContent");
                                        dropdownContent.style.display = (dropdownContent.style.display === "block") ? "none" : "block";
                                    }
                                </script>
                            </li>
                            <li>
                                <!-- show cart count -->
                                <% if(cartCount > 0 && userLoggined){ %>
                                    <div style="background-color: rgb(208, 11, 11); width: 14px; height: 16px; border-radius: 20px;
                                            position: absolute; color: white; padding: 2px; left: 88.4vw; top: 37;">
                                        <p style="    margin-top: -3px;
                                        margin-bottom: 1rem;
                                        font-size: 12px;
                                    "><%= cartCount %></p>
                                    </div>
                                <% }else{ %>
                                    <div style=" display: none; background-color: rgb(208, 11, 11); width: 14px; height: 16px; border-radius: 20px;
                                            position: absolute; color: white; padding: 2px; left: 88.4vw; top: 37;">
                                        <p style="    margin-top: -3px;
                                        margin-bottom: 1rem;
                                        font-size: 12px;
                                    "><%= cartCount %></p>
                                    </div>
                                <% } %>
                                
                                <a href="/shopping-cart" class="cart">
                                    <span class="bag-icon"><i class="fa fa-shopping-bag" aria-hidden="true"></i></span>
                                </a>
                            </li>
                            <li style="margin-left: 10px;">

                                <!-- show wishlist count -->
                                <% if(wishlistCount > 0 && userLoggined){ %>
                                    <div style="background-color: rgb(208, 11, 11); width: 14px; height: 16px; border-radius: 20px;
                                            position: absolute; color: white; padding: 2px; left: 90.7vw; top: 37;">
                                        <p style="    margin-top: -3px;
                                        margin-bottom: 1rem;
                                        font-size: 12px;
                                    "><%= wishlistCount %></p>
                                    </div>
                                <% }else{ %>
                                    <div style=" display: none; background-color: rgb(208, 11, 11); width: 14px; height: 16px; border-radius: 20px;
                                            position: absolute; color: white; padding: 2px; left: 90.7vw; top: 37;">
                                        <p style="    margin-top: -3px;
                                        margin-bottom: 1rem;
                                        font-size: 12px;
                                    "><%= wishlistCount %></p>
                                    </div>
                                <% } %>


                                <a href='/wishlist' class="wishlist">
                                    <span class="heart-icon"><i class="fa fa-heart" aria-hidden="true"></i></span>
                                </a>
                            </li>
                        </ul>
                    </div>
                    <!-- /icons -->
                </div>

            </div>
        </div>
    </header>
    <!-- /header section -->
    

    <div id="productDetails" data-product-details="<%= JSON.stringify(allProductDetails) %>"></div>

    <div id="product-list">
        <!-- Products will be dynamically added here(this is used to access  allproducts without using ejs syntax) --> 
    </div>


    
    

    <!-- main section -->
    <main class="main-section" style="min-height: 77vh;">
        <div class="container-fluid">
            <div class="row p-0">
                <div class="col-12 m-0 d-flex p-0">
                    <div class="container-box">
                        
                        <div class="d-flex gap-6">
                            <!-- ***************hamburger**************** -->
                            <div class="navbar">
                                <div class="hamburger"  onclick="toggleMenu()">
                                <div class="line" style="height: 2px;"></div>
                                <div class="line" style="height: 2px;"></div>
                                <div class="line" style="height: 1.5px;"></div>
                                </div>
                            </div>
                            <!-- ***************/hamburger**************** -->

                            <!-- heading div -->
                            <div class="heading-section">
                                <h1>Men's Watches</h1>
                            </div>
                            <!-- /heading div -->
                        </div>


                        <!-- ************sorting************ -->
                        <div style="background-color: transparent; display: flex; justify-content: flex-end; cursor: pointer;">
                            <select id="sort-by" onchange="sortProducts()">
                                <option value="productName_asc">Sort By</option>
                                <option value="productName_asc">Product Name (A-Z)</option>
                                <option value="productName_desc">Product Name (Z-A)</option>
                                <option value="lastPrice_asc">Price (Low to High)</option>
                                <option value="lastPrice_desc">Price (High to Low)</option>
                            </select>
                        </div>
                        <p id="clear-sortBtn"><i class="fa fa-times" aria-hidden="true"></i></p>

                                <!-- clear btn js -->
                                <script>
                                    document.addEventListener('DOMContentLoaded', function() {
                                        const clearSortBtn = document.getElementById('clear-sortBtn');
                                        clearSortBtn.addEventListener('click', function() {
                                            location.reload();
                                        });
                                    });
                                </script>
                                <!-- clear btn js -->

                        <!-- ************ /sorting************ -->



                        <!-- filter section -->
                        <div id="filterSection" class="filter-section">
                            <!-- single line -->
                            <p class="sub-heading">FILTERS</p>
                            <p id="reset-filters" class="clear-txt">Clear Filter</p>

                            <!-- clear filter -->
                            <script>
                                document.addEventListener('DOMContentLoaded', function() {
                                    const clearFilterBtn = document.getElementById('reset-filters');
                                    clearFilterBtn.addEventListener('click', function() {
                                        location.reload();
                                    });
                                });
                            </script>
                            <!-- clear filter -->




                            <svg class="line1" width="384" height="2" viewBox="0 0 384 2" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M0 0H384V1.52H0V0Z" fill="#3A3939"/>
                                </svg>
                            <p class="filter-heads">BRAND</p>
                            <ul class="menu">
                                <li class="filter-component">
                                    <input id="tissot" class="filter-checkbox" type="checkbox" data-filter="brand" value="Rado">
                                    <label>Rado</label>
                                </li>
                                <li class="filter-component">
                                    <input id="daniel-wellington" class="filter-checkbox" type="checkbox"  data-filter="brand" value="Zenith">
                                    <label class="filter-longText">Zenith</label>
                                </li>
                                <li class="filter-component">
                                    <input id="breda" class="filter-checkbox" type="checkbox"  data-filter="brand" value= 'titan'>
                                    <label>Titan</label>
                                </li>
                                <li class="filter-component">
                                    <input id="fossil" class="filter-checkbox" type="checkbox"  data-filter="brand" value="Jaeger LeCoultre">
                                    <label>Jaeger LeCoulture</label>
                                </li>
                                <li class="filter-component">
                                    <input id="titan" class="filter-checkbox" type="checkbox"  data-filter="brand" value="fastrack">
                                    <label>Fastrack</label>
                                </li>
                                <li class="filter-component">
                                    <input id="casio" class="filter-checkbox" type="checkbox"  data-filter="brand" value="Patek Philipe">
                                    <label>Patek Philipe</label>
                                </li>
                                <!-- <li class="filter-component">
                                    <input id="fastrack" class="filter-checkbox" type="checkbox"  data-filter="brand" value="Fastrack">
                                    <label>Fastrack</label>
                                </li> -->
                            </ul> 
                            <svg class="line1" width="384" height="2" viewBox="0 0 384 2" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M0 0H384V1.52H0V0Z" fill="#3A3939"/>
                                </svg>
                            <p class="filter-heads">DISCOUNT  RANGE</p>
                            <ul>
                                <li class="filter-component">
                                    <input id="nine-below" class="filter-checkbox" type="checkbox" data-filter="discountRange" value="1">
                                    <label>1% and above</label>
                                </li>
                                <li class="filter-component">
                                    <input id="ten-above" class="filter-checkbox" type="checkbox" data-filter="discountRange" value="10">
                                    <label>10% and above</label>
                                </li>
                                <li class="filter-component">
                                    <input id="twenty-above" class="filter-checkbox" type="checkbox" data-filter="discountRange" value="20">
                                    <label>20% and above</label>
                                </li>
                                <li class="filter-component">
                                    <input id="thirty-above" class="filter-checkbox" type="checkbox" data-filter="discountRange" value="30">
                                    <label>30% and above</label>
                                </li>
                                <li class="filter-component">
                                    <input id="fourty-above" class="filter-checkbox" type="checkbox" data-filter="discountRange" value="40">
                                    <label>40% and above</label>
                                </li>
                                <li class="filter-component">
                                    <input id="fifty-above" class="filter-checkbox" type="checkbox" data-filter="discountRange" value="50">
                                    <label>50% and above</label>
                                </li>
                                <li class="filter-component">
                                    <input id="sixty-above" class="filter-checkbox" type="checkbox" data-filter="discountRange" value="60">
                                    <label>60% and above</label>
                                </li>
                                <li class="filter-component">
                                    <input id="seventy-above" class="filter-checkbox" type="checkbox" data-filter="discountRange" value="70">
                                    <label>70% and above</label>
                                </li>
                                <li class="filter-component">
                                    <input id="eighty-above" class="filter-checkbox" type="checkbox" data-filter="discountRange" value="80">
                                    <label>80% and above</label>
                                </li>
                                <li class="filter-component">
                                    <input id="ninety-above" class="filter-checkbox" type="checkbox" data-filter="discountRange" value="90">
                                    <label>90% and above</label>
                                </li>
                            </ul> 
                            <svg class="line1" width="384" height="2" viewBox="0 0 384 2" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M0 0H384V1.52H0V0Z" fill="#3A3939"/>
                                </svg>
                            
                        </div>
                        <!-- /filter section -->



                        <!-- collection section -->
                        <div class="collection-section">
                            <div style="display: flex; flex-wrap: wrap;" class="each-box">
                                <style>
                                    .hidden {
                                        display: none;
                                    }
                                </style>
                            
                                <% for(let i=0; i<allProductDetails.length; i++) { %>
                                    <a href="/single-product/<%= allProductDetails[i]._id %>" style="text-decoration: none;">
                                        <div class="collection-box hidden" data-product-name="<%= allProductDetails[i].productName %>" data-last-price="<%= allProductDetails[i].lastPrice %>">
                                            <img class="collection-img" src="<%= allProductDetails[i].images[0] %>" alt="<%= allProductDetails[i].filename %>">
                                            <p class="brand-name"><%= allProductDetails[i].productName %></p>
                                            <p class="caption"><%= allProductDetails[i].productDescription %></p>
                                            
                                            <!-- price handiling -->
                                            <div class="price-container d-flex gap-3">

                                                <!-- both offer exist case -->
                                                <% if(allProductDetails[i]?.categoryofferDiscount && allProductDetails[i]?.productofferDiscount){ %>
                                                    
                                                    <%# let finalizeDiscount = allProductDetails[i].productofferDiscount > categoryOfferExist.discount ? allProductDetails[i].productofferDiscount : categoryOfferExist.discount %>
                                                    <% let finalizeDiscount = allProductDetails[i].productofferDiscount > allProductDetails[i].categoryofferDiscount ? allProductDetails[i].productofferDiscount : allProductDetails[i].categoryofferDiscount %>


                                                    <% let totalDisc = allProductDetails[i].discount + finalizeDiscount %>
                                                    <% let disc = (allProductDetails[i].firstPrice * totalDisc)/100 %>
                                                    <% let finalAmount = allProductDetails[i].firstPrice - disc %>

                                                    <% finalAmount = Math.trunc(finalAmount); %>

                                                    <p class="price">Rs. <%= finalAmount %></p>
                                                    <p class="offer-price">Rs. <%= allProductDetails[i].firstPrice %></p>
                                                    <p class="offer">(<%= allProductDetails[i].discount + finalizeDiscount %>% OFF)</p>
                                                    <script>
                                                        console.log('in both offer case');
                                                    </script>

                                                <!-- only product-offer exist case  -->
                                                <% } else if(allProductDetails[i]?.productofferDiscount) { %>

                                                    <% let totalDisc = allProductDetails[i].discount + allProductDetails[i].productofferDiscount %>
                                                    <% let disc = (allProductDetails[i].firstPrice * totalDisc)/100 %>
                                                    <% let finalAmount = allProductDetails[i].firstPrice - disc %>

                                                    <% finalAmount = Math.trunc(finalAmount); %>

                                                    <p class="price">Rs. <%= finalAmount %></p>
                                                    <p class="offer-price">Rs. <%= allProductDetails[i].firstPrice %></p>
                                                    <p class="offer">(<%= allProductDetails[i].discount + allProductDetails[i].productofferDiscount %>% OFF)</p>
                                                    <script>
                                                        console.log('in product offer case');
                                                    </script>

                                                <!-- only category-offer exist case -->
                                                <%# } else if(categoryOfferExist) { %>
                                                <% } else if(allProductDetails[i]?.categoryofferDiscount) { %>

                                                    <% let totalDisc = allProductDetails[i].discount + allProductDetails[i].categoryofferDiscount %>
                                                    <% let disc = (allProductDetails[i].firstPrice * totalDisc)/100 %>
                                                    <% let finalAmount = allProductDetails[i].firstPrice - disc %>

                                                    <% finalAmount = Math.trunc(finalAmount); %>

                                                    <p class="price">Rs. <%= finalAmount %></p>
                                                    <p class="offer-price">Rs. <%= allProductDetails[i].firstPrice %></p>
                                                    <p class="offer">(<%= allProductDetails[i].discount + allProductDetails[i]?.categoryofferDiscount %>% OFF)</p>
                                                    <script>
                                                        console.log('in cat offer case');
                                                    </script>

                                                <!-- none of these offer exist case -->
                                                <% } else { %>
                                                    <p class="price">Rs. <%= allProductDetails[i].lastPrice %></p>
                                                    <p class="offer-price">Rs. <%= allProductDetails[i].firstPrice %></p>
                                                    <p class="offer">(<%= allProductDetails[i].discount %>% OFF)</p>
                                                    <script>
                                                        console.log('in no-extra offer case');
                                                    </script>
                                                <% } %>

                                            </div>
                                            <!-- /price handiling -->


                                        </div>
                                    </a>
                                <% } %>
                                <% if (productNotFound) { %>
                                    <p style="margin-left: 20px;margin-top: 20px; color: red;">No products found in the men's category.</p>
                                <% } %>
                            </div>
                                                     
                        </div>
                        <!-- /collection section -->
                    </div>
                </div>
            </div>
        </div>
    </main>
    <!-- /main section -->


    <!-- bootstrap pagination controller -->
    <nav aria-label="Page navigation example" style="padding: 10px 0px 10px 0px; width: 100vw; background-color: rgb(241 237 237);">
        <ul class="pagination" style="position: relative; left: 50vw;">
            <% for (let i = 0; i < paginationLinks.length; i++) { %>
                <li class="page-item <%= paginationLinks[i].isActive ? 'active' : '' %>">
                    <a class="page-link" href="<%= paginationLinks[i].url %>"><%= paginationLinks[i].page %></a>
                </li>
            <% } %>
        </ul>
    </nav>
    <!-- /bootstrap pagination controller -->



    <!-- footer section -->
    <footer class="footer-section m-0" style="overflow-x: hidden;">
        <div class="container-fluid">
            <div class="row">
                <div class="col-12">
                    <div class="last-section">

                        <p class="logo-text">Time Trove</p>

                        <div class="left-texts">
                            <p class="bold-text1">Customer Service</p>
                            <i class="fa-brands fa-whatsapp wtsp-icon"></i>
                            <i class=" fa-regular fa-envelope email-icon"></i>
                            <ul class="links1">
                                <li class="left-subtexts">+91 8756575677</li>
                                <li class="left-subtexts">(Mon-Fri,9:00am - 5:00pm)</li>
                                <li class="email left-subtexts" style="margin-top:12px;"><a class="links"
                                        href="#">tt@timetrove.com</a></li>
                            </ul>
                        </div>

                        <div class="right-texts" style="text-decoration: none;">
                            <p class="bold-text2">Product Help</p>
                            <ul class="links2 p-0">
                                <li class="right-subtexts"><a href="#" class="links">Return and
                                        Cancellation<br>Policy</a></li>
                                <li class="right-subtexts s-policy" style="margin-top:12px;">
                                    <a href="#" class="links">Shipping & delivery Policy</a>
                                </li>
                            </ul>
                        </div>

                        <div class="footer-icons">
                            <i class="fa-brands fa-facebook-f"></i>
                            <i class="fa-brands fa-instagram"></i>
                            <i class="fa-brands fa-twitter"></i>
                            <i class="fa-brands fa-youtube"></i>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- /footer section -->



    <!-- filter section -->

    <script>
        // Function to filter products based on selected filters
        function filterProducts(products, filters) {
            return products.filter(product => {
                let match = true; // Assume product matches initially
    
                // Check each filter criteria
                for (const filterKey in filters) {
                    const filterValue = filters[filterKey]; // Get selected value for the filter
                    if (filterKey === 'brand') {
                        match = match && product.productName.toLowerCase() === filterValue.toLowerCase(); // Case-insensitive brand matching
                    } else if (filterKey === 'discountRange') {
                        // const discount = parseInt(product.discount); // Assuming discount is stored in a property


                        let discount = 0;
                        // **********************
                        if(product.productofferDiscount && product.categoryofferDiscount){
                            let finalizeDiscount = product.productofferDiscount > product.categoryofferDiscount ? product.productofferDiscount : product.categoryofferDiscount;
                            const addDiscounts = finalizeDiscount + product.discount;
                            discount = addDiscounts;
                        }else if(product.productofferDiscount){
                            const addDiscounts = product.productofferDiscount + product.discount;
                            discount = addDiscounts;
                        }else if(product.categoryofferDiscount){
                            const addDiscounts = product.categoryofferDiscount + product.discount;
                            discount = addDiscounts;
                        }else{
                            discount = product.discount;
                        }




                        // **********************

                        match = match && parseInt(discount) >= filterValue; // Check discount range match
                    }
                }
    
                return match; // Return true if the product matches all filters
            });
        }
    
        // Function to get currently selected filters
        function getSelectedFilters() {
            const selectedFilters = {};
            const brandCheckboxes = document.querySelectorAll('.filter-checkbox[data-filter="brand"]:checked');
            const discountCheckboxes = document.querySelectorAll('.filter-checkbox[data-filter="discountRange"]:checked');
    
            // Collect selected brands
            brandCheckboxes.forEach(checkbox => {
                selectedFilters.brand = checkbox.value;
            });
    
            // Collect selected discount ranges
            discountCheckboxes.forEach(checkbox => {
                selectedFilters.discountRange = parseInt(checkbox.value);
            });
    
            return selectedFilters;
        }


        // Function to update the product list based on filtered results
        function updateProductList(filteredProducts) {
            const productBoxes = document.querySelectorAll('.collection-box');
            productBoxes.forEach(box => {
                // Initially show all products
                box.classList.remove('hidden');
            });

            filteredProducts.forEach(product => {
                const productBox = document.querySelector(`.collection-box[data-product-name="${product.productName}"]`);
                if (productBox) {
                    productBox.classList.remove('hidden'); // Ensure the product is shown
                }
            });

            // After showing all products, hide those not in the filtered list
            productBoxes.forEach(box => {
                if (!filteredProducts.some(product => product.productName === box.dataset.productName)) {
                    box.classList.add('hidden'); // Hide the product if not in the filtered list
                }
            });
        }

    
        // Event listeners for filter checkboxes
        document.addEventListener('DOMContentLoaded', function() {
            const filterCheckboxes = document.querySelectorAll('.filter-checkbox');
    
            // Parse the allProductDetails JSON string
            const productDetailsDiv = document.getElementById('productDetails');
            const allProductDetails = JSON.parse(productDetailsDiv.getAttribute('data-product-details'));
    
            // Initially display all products
            updateProductList(allProductDetails);
    
            filterCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', () => {
                    const selectedFilters = getSelectedFilters(); // Get currently selected filters
                    const filteredProducts = filterProducts(allProductDetails, selectedFilters);
                    updateProductList(filteredProducts); // Update the product list based on filtered results
                });
            });
        });
    </script>

    <!-- /filter section -->









    <!-- sort section js -->
    <script>

        function updateURLWithSortingCriteria(sortBy, order) {
            // Assuming you want to update the URL query parameter for sorting
            // This example uses the History API to update the URL without reloading the page
            const urlParams = new URLSearchParams(window.location.search);
            urlParams.set('sort', `${sortBy}_${order}`);
            window.history.pushState({}, '', `${window.location.pathname}?${urlParams}`);
        }

        function sortProducts() {
            const sortBy = document.getElementById('sort-by').value.split('_')[0];
            const order = document.getElementById('sort-by').value.split('_')[1];

            // Select all product elements in the collection section
            const productElements = document.querySelectorAll('.collection-section .collection-box');

            // Convert NodeList to Array for sorting
            const productsArray = Array.from(productElements);

            // Sort the products
            const sortedProducts = productsArray.sort((a, b) => {
                // Correctly map sortBy to the corresponding attribute name
                const attributeName = sortBy === 'lastPrice' ? 'last-price' : sortBy === 'productName' ? 'product-name' : '';

                // Parse the values as numbers if the sortBy attribute is numeric
                const aValue = sortBy === 'lastPrice' ? parseFloat(a.getAttribute(`data-${attributeName}`) || '0') : a.getAttribute(`data-${attributeName}`);
                const bValue = sortBy === 'lastPrice' ? parseFloat(b.getAttribute(`data-${attributeName}`) || '0') : b.getAttribute(`data-${attributeName}`);

                if (order === 'asc') {
                    if (sortBy === 'lastPrice') {
                        return aValue - bValue;
                    } else {
                        // Ensure both values are not null before calling localeCompare
                        if (aValue && bValue) {
                            return aValue.localeCompare(bValue);
                        } else {
                            // Handle case where one or both values are null
                            if (!aValue && !bValue) return 0; // Both null, consider as equal
                            if (!aValue) return 1; // aValue is null, consider bValue as greater
                            return -1; // bValue is null, consider aValue as greater
                        }
                    }
                } else {
                    if (sortBy === 'lastPrice') {
                        return bValue - aValue;
                    } else {
                        // Ensure both values are not null before calling localeCompare
                        if (aValue && bValue) {
                            return bValue.localeCompare(aValue);
                        } else {
                            // Handle case where one or both values are null
                            if (!aValue && !bValue) return 0; // Both null, consider as equal
                            if (!aValue) return -1; // aValue is null, consider bValue as greater
                            return 1; // bValue is null, consider aValue as greater
                        }
                    }
                }
            });

            // Clear the current product list
            const collectionSection = document.querySelector('.collection-section');
            collectionSection.innerHTML = '';

            // Add the sorted products to the DOM
            sortedProducts.forEach(product => {
                collectionSection.appendChild(product);
            });

            // Update the URL with the new sorting criteria
            updateURLWithSortingCriteria(sortBy, order);
        }
    </script>
    <!-- sort section js -->













    <!-- search box- clear input field after performing operations -->
    <script>
        // Function to clear the search input field
        function clearSearchInput() {
            // Select the input field by its ID
            var searchInput = document.getElementById('searchInput');
            // Clear the input field
            searchInput.value = '';
        }

        //Clear the search input field after 5 seconds
        setTimeout(clearSearchInput, 1000);
    </script>
    <!-- search box- clear input field after performing operations -->


    <!-- search box main function-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <script>
        $(document).ready(function() {
            $('#searchInput').on('input', function() {
                const query = $(this).val();
                if (query.length >= 1) { // Only search if the query is at least 3 characters long
                    $.ajax({
                        url: '/search', // Adjust the URL as necessary
                        type: 'GET',
                        data: { q: query },
                        success: function(products) {
                            // Clear the previous search results
                            $('.search-results').empty();
    
                            // Render the new search results
                            products.forEach(product => {
                                // Create a new div for the product result
                                const productDiv = $('<div class="product-result"></div>');
    
                                // Append the product details to the div
                                productDiv.append(`
                                    <h6>${product.productName}</h6>
                                    <p>${product.productDescription}</p>
                                    <img src="${product.images[0]}" alt="${product.productName}">
                                `);
    
                                // Attach a click event handler to the div
                                productDiv.on('click', function() {
                                    // Redirect to the product details page, passing the product's ID as a parameter
                                    window.location.href = `/single-product/${product._id}`;
                                });
    
                                // Append the div to the search results container
                                $('.search-results').append(productDiv);
                            });
                            $('.search-results').show(); // Ensure the search results are visible

                        },
                        error: function(error) {
                            console.error('Error fetching search results:', error);
                        }
                    });
                }
            });
    
            // Define the hideSearchResults function
            function hideSearchResults() {
                $('.search-results').empty().hide(); // Clear and hide the search results
            }
    
            // Listen for click events on the document
            $(document).on('click', function(event) {
                // Check if the click was outside the search box and search results container
                if (!$(event.target).closest('.search-box, .search-results').length) {
                    // Hide the search results
                    hideSearchResults();
                }
            });
        });
    </script>
    <!-- search box main function-->


    <!-- search box close and submit btn activation js-->
    <script>
        document.querySelector('.search').addEventListener('click', function(event) {
            event.preventDefault(); // Prevent the default action of the link
            var searchBox = document.querySelector('.search-box');
            searchBox.style.display = searchBox.style.display === 'none' ? 'block' : 'none';
        });

        document.querySelector('.search-close').addEventListener('click', function(event) {
            event.preventDefault(); // Prevent the default action of the button
            document.querySelector('.search-box').style.display = 'none';
            hideSearchResults(); 
        });

        document.querySelector('.search-submit').addEventListener('click', function(event) {
            event.preventDefault(); // Prevent the default action of the button
            var searchInput = document.querySelector('.search-input').value;
            console.log('Search submitted:', searchInput);
            // Here you can add the functionality to perform the search
        });

        function hideSearchResults() {
            $('.search-results').empty().hide(); // Clear and hide the search results
        }
    </script>
        <!-- search box js-->


    


    <script>
    function toggleMenu() {
        var filterSection = document.getElementById('filterSection');
        if (filterSection.style.display === 'block') {
        filterSection.style.display = 'none';
        } else {
        filterSection.style.display = 'block';
        }
    }
    </script>
    

    <!-- Bootstrap script file -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"crossorigin="anonymous"></script>
    <!--end of Bootstrap script file -->

</body>
</html>